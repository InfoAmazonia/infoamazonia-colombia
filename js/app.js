!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a,b){var c=["#layer { polygon-fill: transparent; polygon-opacity: 1; line-width: 1; line-opacity: 0.5; line-color: #000; }","#layer[ "+a+" <= 0 ] { polygon-fill: transparent; }"];return b.forEach(function(b,d){c.push("#layer[ "+a+" >= "+b+" ] { polygon-fill: rgba(0,0,0, "+(d+1)/5+");\t}")}),c.join(" ")}function e(a,b,c,d){a.execute("SELECT CDB_HeadsTailsBins(array_agg(cast("+c+" as numeric)), 7) FROM "+b).done(function(a){var b=a.rows[0].cdb_headstailsbins;console.log(a),d(b)})}b.exports=function(a){a.directive("map",["$rootScope",function(a){return{restrict:"EAC",scope:{username:"=",sql:"=",query:"=",columns:"=",table:"="},link:function(a,b,c){function f(b){var c={user_name:a.username,sublayers:[{sql:a.query,cartocss:b,interactivity:a.columns}]};cartodb.Tiles.getTiles(c,function(b,c){null==b?console.log("error: ",c.errors.join("\n")):(h=L.tileLayer(b.tiles[0]),g.addLayer(h),a.sql.getBounds(a.query).done(function(a){g.fitBounds(a)}),i=new L.UtfGrid(b.grids[0][0]+"&callback={cb}"),g.addLayer(i),i.on("mouseover",function(a){console.log("hover",a.data)}))})}var g=L.map(b[0],{center:[0,0],zoom:1,scrollWheelZoom:!1,infowindow:!0});g.addLayer(L.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"));var h,i;a.$watchGroup(["username","query","sql","columns","dataTable"],function(){"undefined"!=typeof h&&g.removeLayer(h),"undefined"!=typeof i&&g.removeLayer(i),a.username&&a.query&&a.sql&&a.columns&&(a.column=a.columns[1],e(a.sql,a.table,a.column,function(b){var c=d(a.column,b);f(c)}))})}}}])}},{}],2:[function(a,b,c){b.exports={options:{chart:{type:"spline",backgroundColor:null,plotBackgroundColor:null,style:{fontFamily:"Open Sans",color:"#ffffff"}},tooltip:{style:{padding:10,fontWeight:"bold"}},title:!1,subtitle:!1,legend:{enabled:!1},yAxis:{labels:{style:{color:"#fff"}},gridLineColor:"rgba(255,255,255,0.1)"},xAxis:{labels:{style:{color:"#fff"}}},credits:{enabled:!1}}}},{}],3:[function(a,b,c){highchartsDefaults=a("./highcharts-defaults");var d=angular.module("ia-colombia",["highcharts-ng"]).controller("SiteCtrl",["$rootScope","$scope","$timeout",function(a,b,c){b.user="infoamazonia",b.dataTable="ideam_deforestacion_anual",b.geomTable="depto_amzideam",b.queryWhere="data.departamentos = geom.nom_depto",b.sql=new cartodb.SQL({user:b.user}),b.dataQuery="SELECT * FROM "+b.dataTable,b.sql.execute(b.dataQuery).done(function(c){console.log(c);var d=[];for(var e in c.fields)"the_geom"!==e&&"the_geom_webmercator"!==e&&"cartodb_id"!==e&&d.push(e);a.$apply(function(){b.columns=d,b.query="SELECT geom.cartodb_id, geom.the_geom, geom.the_geom_webmercator, data."+b.columns.join(", data.")+" FROM "+b.dataTable+" as data, "+b.geomTable+" as geom WHERE "+b.queryWhere+" GROUP BY data.cartodb_id, geom.cartodb_id"})}),b.chartConfig=angular.extend({series:[{data:[10,15,12,8,7]}]},highchartsDefaults)}]);a("./directives")(d),angular.element(document).ready(function(){angular.bootstrap(document,["ia-colombia"])})},{"./directives":1,"./highcharts-defaults":2}]},{},[3]);