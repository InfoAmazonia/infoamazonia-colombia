!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){b.exports=function(a,b){b.get("css/bnb_2013_amzideam_ha.cartocss").then(function(b){cartodb.Tiles.getTiles({user_name:"infoamazonia",sublayers:[{sql:"select * from bnb_2013_amzideam_ha",cartocss:b.data}]},function(b,c){null==b?console.log("error: ",c.errors.join("\n")):a.addLayer(L.tileLayer(b.tiles[0]),{zIndexOffset:2})})}),b.get("css/bnb_1990_ideamamz.cartocss").then(function(b){cartodb.Tiles.getTiles({user_name:"infoamazonia",sublayers:[{sql:"select * from bnb_1990_ideamamz",cartocss:b.data}]},function(b,c){null==b?console.log("error: ",c.errors.join("\n")):a.addLayer(L.tileLayer(b.tiles[0],{zIndexOffset:1}))})})}},{}],2:[function(a,b,c){"use strict";function d(a,b){var c=["#layer { polygon-fill: transparent; polygon-opacity: 1; line-width: .5; line-opacity: 0.5; line-color: #fff; }","#layer[ "+a+" <= 0 ] { polygon-fill: transparent; }"];return b.forEach(function(b,d){c.push("#layer[ "+a+" >= "+b+" ] { polygon-fill: rgba(255, 255, 255, "+(d+1)/10+");\t}")}),c.join(" ")}function e(a,b,c,d){a.execute("SELECT CDB_HeadsTailsBins(array_agg(cast("+c+" as numeric)), 7) FROM "+b).done(function(a){var b=a.rows[0].cdb_headstailsbins;console.log(a),d(b)})}var f=a("./base-layers");b.exports=function(a){a.directive("map",["$rootScope","$http",function(a,b){return{restrict:"EAC",scope:{username:"=",sql:"=",query:"=",columns:"=",table:"=",gridItem:"="},link:function(a,c,g){function h(b){var c={user_name:a.username,sublayers:[{sql:a.query,cartocss:b,interactivity:a.columns}]};cartodb.Tiles.getTiles(c,function(b,c){null==b?console.log("error: ",c.errors.join("\n")):(l=L.tileLayer(b.tiles[0],{zIndexOffset:3}),k.addLayer(l),a.sql.getBounds(a.query).done(function(a){i.fitBounds(a,{paddingTopLeft:[0,100],paddingBottomRight:[.4*window.innerWidth,0]})}),m=new L.UtfGrid(b.grids[0][0]+"&callback={cb}"),k.addLayer(m),m.on("mouseover",function(b){a.$apply(function(){a.gridItem=b.data})}),m.on("mouseout",function(b){a.$apply(function(){a.gridItem=!1})}))})}var i=L.map(c[0],{center:[0,0],zoom:1,scrollWheelZoom:!0,fadeAnimation:!0,zoomAnimation:!0});i.addLayer(L.tileLayer("https://api.mapbox.com/styles/v1/infoamazonia/cirgitmlm0010gdm9cd48fmlz/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiaW5mb2FtYXpvbmlhIiwiYSI6InItajRmMGsifQ.JnRnLDiUXSEpgn7bPDzp7g",{zIndexOffset:1}));var j=L.layerGroup({zIndexOffset:2}),k=L.layerGroup({zIndexOffset:3});setTimeout(function(){j.addTo(i),k.addTo(i)},2e3),f(j,b);var l,m;a.$watchGroup(["username","query","sql","columns","dataTable"],function(){"undefined"!=typeof l&&k.removeLayer(l),"undefined"!=typeof m&&k.removeLayer(m),a.username&&a.query&&a.sql&&a.columns&&(a.column=a.columns[2],e(a.sql,a.table,a.column,function(b){var c=d(a.column,b);h(c)}))})}}}])}},{"./base-layers":1}],3:[function(a,b,c){b.exports={options:{chart:{type:"spline",backgroundColor:null,plotBackgroundColor:null,style:{fontFamily:"Open Sans",color:"#ffffff"}},tooltip:{style:{padding:10,fontWeight:"bold"}},title:!1,subtitle:!1,legend:{enabled:!1},plotOptions:{series:{color:"#f26969"}},yAxis:{labels:{style:{color:"#fff"}},gridLineColor:"rgba(255,255,255,0.1)"},xAxis:{labels:{style:{color:"#fff"}}},credits:{enabled:!1}}}},{}],4:[function(a,b,c){var d=a("./highcharts-defaults"),e=angular.module("ia-colombia",["highcharts-ng"]).controller("SiteCtrl",[function(){}]).controller("MapCtrl",["$rootScope","$scope","$timeout",function(a,b,c){b.user="infoamazonia",b.dataTable="ideam_deforestacion_anual",b.geomTable="depto_amzideam",b.queryWhere="data.departamento = geom.nom_depto",b.sql=new cartodb.SQL({user:b.user}),b.dataQuery="SELECT * FROM "+b.dataTable,b.gridItem=!1,b.sql.execute(b.dataQuery).done(function(c){var d=[];for(var e in c.fields)"the_geom"!==e&&"the_geom_webmercator"!==e&&"cartodb_id"!==e&&d.push(e);a.$apply(function(){b.columns=d,b.query="SELECT geom.cartodb_id, geom.the_geom, geom.the_geom_webmercator, data."+b.columns.join(", data.")+" FROM "+b.dataTable+" as data, "+b.geomTable+" as geom WHERE "+b.queryWhere+" GROUP BY data.cartodb_id, geom.cartodb_id"})}),b.$watch("gridItem",function(){b.chartConfig=angular.extend({series:[{data:[b.gridItem.deforestacion_2014,b.gridItem.deforestacion_2015]}]},d),console.log(b.chartConfig)})}]);a("./directives")(e),angular.element(document).ready(function(){angular.bootstrap(document,["ia-colombia"])})},{"./directives":2,"./highcharts-defaults":3}]},{},[4]);