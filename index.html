<!DOCTYPE html>
<html>
  <head>
    <title>InfoAmazonia Colombia</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="fragment" content="!">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300,700|Open+Sans:300,300i,400,400i,600,700,800" rel="stylesheet">
    <link rel="stylesheet" href="lib/skeleton/css/normalize.css">
    <link rel="stylesheet" href="lib/skeleton/css/skeleton.css">
    <link rel="stylesheet" href="lib/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="lib/leaflet/dist/leaflet.css">
    <link rel="stylesheet" href="lib/highcharts/css/highcharts.css">
    <link rel="stylesheet" href="css/app.css">
  </head>
  <body ng-controller="SiteCtrl">
    <header id="masthead">
      <div class="container">
        <div class="twelve columns">
          <h1><a href="http://infoamazonia.org/" title="InfoAmazonia" rel="external" target="_blank">InfoAmazonia<img src="img/infoamazonia.png">Colombia</a></h1>
        </div>
      </div>
    </header>
    <nav id="main-nav" ng-class="{active: showNav}"><a class="fa fa-bars" title="Menu" aria-hidden="true" href="javascript:void(0);" ng-click="toggleNav()" ng-hide="showNav"></a><a class="fa fa-close" title="Menu" aria-hidden="true" href="javascript:void(0);" ng-click="toggleNav()" ng-show="showNav"></a>
      <div class="nav-content"><a href="http://infoamazonia.org/datasets" rel="external" target="_blank">Dados</a>
      </div>
    </nav>
    <div ng-controller="MapCtrl">
      <div class="map-container">
        <div id="map" map sql="sql" username="user" query="query" columns="columns" table="dataTable" grid-item="gridItem" geojson="filteredStories | memoize"></div>
      </div>
      <map-timeline items="timeline.items"></map-timeline>
      <section id="sidebar">
        <header>
          <nav id="sidebar-nav"><a ng-class="{active: viewing == 'dashboard'}" ng-click="setView('dashboard')">Dashboard</a><a ng-class="{active: viewing == 'stories'}" ng-click="setView('stories')">Stories</a></nav>
        </header>
        <div class="sidebar-sections">
          <section class="sidebar-section" id="dashboard" ng-show="viewing == 'dashboard'">
            <p class="main">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer elementum hendrerit elit, quis sagittis mi laoreet nec. Aenean malesuada pellentesque luctus. Nunc dignissim, eros quis pellentesque sagittis, arcu magna scelerisque justo, sed interdum ligula mi sit amet enim.</p>
            <div class="grid-item" ng-show="gridItem">
              <h2>{{gridItem.departamento}}</h2>
              <p><strong>2014</strong><br>{{gridItem.deforestacion_2014}} ha</p>
              <p><strong>2015</strong><br>{{gridItem.deforestacion_2015}} ha</p>
            </div>
            <highchart id="chart1" config="chartConfig"></highchart>
          </section>
          <section class="sidebar-section" id="stories" ng-show="viewing == 'stories'">
            <p>InfoAmazonia stories on Colombia</p>
            <p>
              <input type="text" ng-model="searchStories" placeholder="Search inside stories...">
            </p>
            <div class="timeline-items">
              <div class="timeline-item clearfix" ng-repeat="(i,story) in filteredStories = (stories | filter:searchStories)" ng-class="{'focused-story': focusedStory == story.properties.id}" story="story" focused-story="focusedStory">
                <article>
                  <div class="post-box">
                    <header class="post-header">
                      <div class="thumbnail" ng-show="story.properties.thumbnail.full" back-img="{{story.properties.thumbnail.full}}"></div>
                      <h2><a ng-href="{{story.properties.url}}">{{story.properties.title}}</a></h2>
                    </header>
                    <section class="post-content">
                      <p>{{story.properties.excerpt}}</p>
                    </section>
                  </div>
                  <aside class="post-date">
                    <p class="date" ng-show="isDifferentDate(stories, i-1, story.properties.date)">{{story.properties.date | formatDate:'DD/MM/YYYY'}}</p>
                    <p class="time">{{story.properties.date | formatDate:'hh:mm A'}}</p>
                  </aside>
                </article>
              </div>
            </div>
          </section>
        </div>
      </section>
    </div>
    <div id="loading" loading-status-message ng-class="{active: loads.length}"></div>
  </body>
  <script type="text/javascript" src="lib/underscore/underscore-min.js"></script>
  <script type="text/javascript" src="lib/jquery/dist/jquery.min.js"></script>
  <script type="text/javascript" src="lib/moment/moment.js"></script>
  <script type="text/javascript" src="lib/chroma-js/chroma.min.js"></script>
  <script type="text/javascript" src="lib/leaflet/dist/leaflet.js"></script>
  <script type="text/javascript" src="lib/Leaflet.utfgrid/dist/leaflet.utfgrid.js"></script>
  <script type="text/javascript" src="lib/leaflet-bouncemarker/bouncemarker.js"></script>
  <script type="text/javascript" src="lib/angular/angular.min.js"></script>
  <script type="text/javascript" src="lib/angular-animate/angular-animate.min.js"></script>
  <script type="text/javascript" src="lib/cartodb.js/cartodb.core.uncompressed.js"></script>
  <script type="text/javascript" src="lib/highcharts/highcharts.js"></script>
  <script type="text/javascript" src="lib/highcharts-ng/dist/highcharts-ng.min.js"></script>
  <script type="text/javascript" src="js/app.js"></script>
</html>